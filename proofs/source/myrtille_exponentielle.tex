\input{./proofs/source/preambule.tex}
\usepackage{tkz-base}
\usepackage{algorithm}
\usepackage{algorithmic}
\setlength\parindent{0pt}

% \usepackage{graphicx,txfonts}




\title{truc à tout mettre}           
\author{Alexi Canesse, L3 informatique fondamentale,\\École Normale Supérieure de Lyon}
\date{\today}          

\sloppy                  

\pgfplotsset{compat=1.16}

\begin{document}


\setmathfont{Latin Modern Math}
\setmathfont[range={\mathscr,\mathbfscr}]{XITS Math}

% \maketitle
% \vspace{30px}
% \vspace{15px}


\textbf{Lemme: } \mintinline{cpp}{Myrtille} est \((\gamma, \nu)\)-accurate pour l'estimation d'un décile sur la distribution exponentielle de paramètre \(b\) avec
\begin{align*}
    \alpha =&\ \beta \mapsto 8\left( \log k + \log 2/\beta \right)/\varepsilon\\
    \nu = &\ \sup_{(a,\beta) \in \R_+ \times [0,1]} \left( 
        \begin{array}[]{rl}
            &\sum_{k = 0}^{\alpha(\beta)} \binom{n - in/10}{k}\exp\left( -\dfrac{a-\gamma}{b} \right)^k \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^{n - in/10 -k} \\
            & \quad  + \sum_{k = 0}^{in/10} \binom{n}{k} \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^k \exp\left( -\dfrac{a-\gamma}{b} \right)^{n-k} \\
            & \quad + \sum_{k = 0}^{\alpha} \binom{n - in/10}{k} \left( 1 - \exp\left( -\dfrac{\gamma}{b} \right) \right)^k \exp\left( -\dfrac{\gamma}{b} \right)^{n-k}\\
            & \quad + \beta 
        \end{array}
    \right)
\end{align*}

\textit{Démonstration:} Soit \(x \in \R^n\) et \(\gamma, \beta \in [0,1]^2\). On suppose \(x\) triée par ordre croissant pour faciliter les notations.\\

\begin{itemize}[label=•]
    \item Nous pourrions démontrer comme dans le cas uniforme que
    \begin{align*}
        \mathbb P\left(  \mathcal M(x)_i \in [d_i - \gamma, d_i + \gamma] \right) \geq &\ \mathbb P \left([x_{i n/10 -\alpha},x_{i n/10 +\alpha}] \subset [d_i - \gamma, d_i + \gamma] \right) - \beta
   \end{align*}
   \item Minorons enfin \(\mathbb P \left([x_{i n/10 -\alpha},x_{i n/10 +\alpha}] \subset [d_i - \gamma, d_i + \gamma] \right)\) pour conclure!\\
   
   Cette probabilité est la conjonction des deux événements: \(A\) = ``au moins \(\alpha\) des valeurs avant le \(i\)-ème décile sont à \(\gamma\) près de ce déciles'' et \(B\) l'événement analogue pour les valeurs supérieurs.\\

   La distribution exponentielle étant sans mémoire,
   \[
        \mathbb P (B) = 1 - \sum_{k = 0}^{\alpha} \binom{n - in/10}{k} \left( 1 - \exp\left( -\dfrac{\gamma}{b} \right) \right)^k \exp\left( -\dfrac{\gamma}{b} \right)^{n-k}
   \]

   Or, \(A\) est plus probable que l'événement ``\(A\) et \(d_i \geq a\)''. Ainsi, 
   \begin{align*}
        \mathbb P(A) & \geq \mathbb P (A) + \mathbb P(d_i \geq a) - 1\\
        % & \geq \left( 1 - \sum_{k = 0}^{\alpha} \binom{n - in/10}{k} \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^k \exp\left( -\dfrac{a-\gamma}{b} \right)^{n - in/10 -k} \right) + \mathbb P(d_i \geq a) - 1\\
        & = \left( 1 - \sum_{k = 0}^{\alpha} \binom{n - in/10}{k}\exp\left( -\dfrac{a-\gamma}{b} \right)^k \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^{n - in/10 -k} \right)\\
        & \quad  {\color{magenta} + 1} - \sum_{k = 0}^{in/10} \binom{n}{k} \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^k \exp\left( -\dfrac{a-\gamma}{b} \right)^{n-k} {\color{magenta} - 1}
   \end{align*}
\end{itemize}


Finalement,
\begin{align*}
    &\  \mathbb P\left(  \mathcal M(x)_i \in [d_i - \gamma, d_i + \gamma] \right)  \\
    \geq &\   \mathbb P(A) + \mathbb P (B) - 1 - \beta \\
    \geq &\  1 - \sum_{k = 0}^{\alpha} \binom{n - in/10}{k}\exp\left( -\dfrac{a-\gamma}{b} \right)^k \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^{n - in/10 -k} \\
    & \quad  - \sum_{k = 0}^{in/10} \binom{n}{k} \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^k \exp\left( -\dfrac{a-\gamma}{b} \right)^{n-k} \\
    & \quad - \sum_{k = 0}^{\alpha} \binom{n - in/10}{k} \left( 1 - \exp\left( -\dfrac{\gamma}{b} \right) \right)^k \exp\left( -\dfrac{\gamma}{b} \right)^{n-k}\\
    & \quad - \beta
\end{align*}

\vspace*{5pt}
\textbf{Théorème: } Pour tout \(\gamma \in \R_+\), \mintinline{cpp}{Myrtille} a une erreur quadratique moyenne \(\sqrt{9}\gamma\) sur la distribution uniforme sur \([0,1]\) avec une probabilité au moins \(\left( 1 - \nu) \right)^9\) pour 
\begin{align*}
    \alpha =&\ \beta \mapsto 8\left( \log k + \log 2/\beta \right)/\varepsilon\\
    \nu = &\ \sup_{(a,\beta) \in \R_+ \times [0,1]} \left( 
        \begin{array}[]{rl}
            &\sum_{k = 0}^{\alpha(\beta)} \binom{n - in/10}{k}\exp\left( -\dfrac{a-\gamma}{b} \right)^k \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^{n - in/10 -k} \\
            & \quad  + \sum_{k = 0}^{in/10} \binom{n}{k} \left( 1 - \exp\left( -\dfrac{a-\gamma}{b} \right) \right)^k \exp\left( -\dfrac{a-\gamma}{b} \right)^{n-k} \\
            & \quad + \sum_{k = 0}^{\alpha} \binom{n - in/10}{k} \left( 1 - \exp\left( -\dfrac{\gamma}{b} \right) \right)^k \exp\left( -\dfrac{\gamma}{b} \right)^{n-k}\\
            & \quad + \beta 
        \end{array}
    \right)
\end{align*}

\textit{Démonstration:} C'est un corollaire direct du lemme précédent. 


\end{document}